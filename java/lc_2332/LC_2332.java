package lc_2332;


import java.util.ArrayDeque;
import java.util.Arrays;

/**
 * LC_2332
 *
 * @author w
 * @since 2024/9/18
 **/

//é¢˜ç›®: [2332] åä¸Šå…¬äº¤çš„æœ€æ™šæ—¶é—´
//æ—¶é—´: 2024-09-18 21:42:44
//
//ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹é•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ buses ï¼Œå…¶ä¸­ buses[i] è¡¨ç¤ºç¬¬ i è¾†å…¬äº¤è½¦çš„å‡ºå‘æ—¶é—´ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹é•¿åº¦ä¸º
//m çš„æ•´æ•°æ•°ç»„ passengers ï¼Œå…¶ä¸­ passengers[j] è¡¨ç¤ºç¬¬ j ä½ä¹˜å®¢çš„åˆ°è¾¾æ—¶é—´ã€‚æ‰€æœ‰å…¬äº¤è½¦å‡ºå‘çš„æ—¶é—´äº’ä¸ç›¸åŒï¼Œæ‰€æœ‰ä¹˜å®¢åˆ°è¾¾çš„æ—¶é—´ä¹Ÿäº’ä¸ç›¸åŒ
//ã€‚
//
// ç»™ä½ ä¸€ä¸ªæ•´æ•° capacity ï¼Œè¡¨ç¤ºæ¯è¾†å…¬äº¤è½¦ æœ€å¤š èƒ½å®¹çº³çš„ä¹˜å®¢æ•°ç›®ã€‚
//
// æ¯ä½ä¹˜å®¢éƒ½ä¼šæ­ä¹˜ä¸‹ä¸€è¾†æœ‰åº§ä½çš„å…¬äº¤è½¦ã€‚å¦‚æœä½ åœ¨ y æ—¶åˆ»åˆ°è¾¾ï¼Œå…¬äº¤åœ¨ x æ—¶åˆ»å‡ºå‘ï¼Œæ»¡è¶³ y <= x ä¸”å…¬äº¤æ²¡æœ‰æ»¡ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ­ä¹˜è¿™ä¸€è¾†å…¬äº¤ã€‚æœ€æ—© åˆ°è¾¾
//çš„ä¹˜å®¢ä¼˜å…ˆä¸Šè½¦ã€‚
//
// è¿”å›ä½ å¯ä»¥æ­ä¹˜å…¬äº¤è½¦çš„æœ€æ™šåˆ°è¾¾å…¬äº¤ç«™æ—¶é—´ã€‚ä½  ä¸èƒ½ è·Ÿåˆ«çš„ä¹˜å®¢åŒæ—¶åˆ»åˆ°è¾¾ã€‚
//
// æ³¨æ„ï¼šæ•°ç»„ buses å’Œ passengers ä¸ä¸€å®šæ˜¯æœ‰åºçš„ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
// è¾“å…¥ï¼šbuses = [10,20], passengers = [2,17,18,19], capacity = 2
//è¾“å‡ºï¼š16
//è§£é‡Šï¼š
//ç¬¬ 1 è¾†å…¬äº¤è½¦è½½ç€ç¬¬ 1 ä½ä¹˜å®¢ã€‚
//ç¬¬ 2 è¾†å…¬äº¤è½¦è½½ç€ä½ å’Œç¬¬ 2 ä½ä¹˜å®¢ã€‚
//æ³¨æ„ä½ ä¸èƒ½è·Ÿå…¶ä»–ä¹˜å®¢åŒä¸€æ—¶é—´åˆ°è¾¾ï¼Œæ‰€ä»¥ä½ å¿…é¡»åœ¨ç¬¬äºŒä½ä¹˜å®¢ä¹‹å‰åˆ°è¾¾ã€‚
//
// ç¤ºä¾‹ 2ï¼š
//
// è¾“å…¥ï¼šbuses = [20,30,10], passengers = [19,13,26,4,25,11,21], capacity = 2
//è¾“å‡ºï¼š20
//è§£é‡Šï¼š
//ç¬¬ 1 è¾†å…¬äº¤è½¦è½½ç€ç¬¬ 4 ä½ä¹˜å®¢ã€‚
//ç¬¬ 2 è¾†å…¬äº¤è½¦è½½ç€ç¬¬ 6 ä½å’Œç¬¬ 2 ä½ä¹˜å®¢ã€‚
//ç¬¬ 3 è¾†å…¬äº¤è½¦è½½ç€ç¬¬ 1 ä½ä¹˜å®¢å’Œä½ ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// n == buses.length
// m == passengers.length
// 1 <= n, m, capacity <= 10âµ
// 2 <= buses[i], passengers[i] <= 10â¹
// buses ä¸­çš„å…ƒç´  äº’ä¸ç›¸åŒ ã€‚
// passengers ä¸­çš„å…ƒç´  äº’ä¸ç›¸åŒ ã€‚
//
//
// ğŸ‘ 77 ğŸ‘ 0
public class LC_2332 {
}

// æœ€æ™šçš„æ„æ€ä¹Ÿå°±æ˜¯æ¯”æœ€åä¸€ä½å‰ä¸€ä½
// æˆ‘ä»¬å¯ä»¥æ¯æ”¾ä¸Šä¸€ä½ä¹˜å®¢å°±å°†æœ€æ™šæ—¶é—´è®¾ç½®å®ƒçš„å‰ä¸€ä½ï¼Œå¦‚æœå‰ä¸€ä½æœ‰äººï¼Œé‚£å°±è®¾ç½®ä¸ºå‰å‰ä¸€ä½
// å¦‚æœæœ€åä¸€ä¸ªå…¬äº¤è½¦æ²¡æœ‰åæ»¡äººï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®ä¸ºæœ€åä¸€è¾†å…¬äº¤è½¦çš„æ—¶é—´
// æ˜¯å¦å¯ä»¥ä½¿ç”¨æ ˆè®°å½• passengers, å¯ä»¥çš„
// ä½†æ˜¯å¦‚æœå…¬äº¤è½¦æ²¡æœ‰æ»¡æ€ä¹ˆåŠï¼Œåˆ†ä¸¤ç§æƒ…å†µ:
// ç¬¬ä¸€ç§æƒ…å†µï¼šå¦‚æœæ˜¯æœ€åä¸€è¾†å…¬äº¤è½¦æ²¡æœ‰æ»¡ï¼Œé‚£æˆ‘ä»¬æŸ¥çœ‹æ ˆé¡¶çš„ä¹˜å®¢åˆ°è¾¾æ—¶é—´æ˜¯å¦ä¸º æœ€åä¸€è¾†å…¬äº¤è½¦çš„åˆ°è¾¾æ—¶é—´
//           å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆæ­£å¸¸ pop æ ˆï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™å°†ç­”æ¡ˆè®¾ç½®ä¸ºæœ€åä¸€è¾†å…¬äº¤è½¦çš„åˆ°è¾¾æ—¶é—´
// ç¬¬äºŒç§æƒ…å†µï¼š å¦‚æœä¸æ˜¯æœ€åä¸€è¾†å…¬äº¤è½¦æ²¡æœ‰æ»¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ­£å¸¸ pop æ ˆ
// æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®°å½•æœ€åä¸€è¾†å…¬äº¤è½¦æœ‰æ²¡æœ‰æ»¡
class Solution {
    public int latestTimeCatchTheBus(int[] buses, int[] passengers, int capacity) {
        Arrays.sort(passengers);
        Arrays.sort(buses);
        int i = 0;
        ArrayDeque<Integer> passengersDeque  = new ArrayDeque<>();

        for (int j = 0; j < buses.length; j++) {
            int bus = buses[j];
            int curBusCapacity = capacity;
            while (i < passengers.length && passengers[i] <= bus && curBusCapacity > 0) {
                passengersDeque.push(passengers[i]);
                curBusCapacity--;
                i++;
            }
            if (curBusCapacity > 0 && j == buses.length - 1) {
                if (passengersDeque.isEmpty() || passengersDeque.peek() != bus) {
                    return bus;
                }
            }
        }
        int lastPassenger = passengersDeque.pop();
        while (!passengersDeque.isEmpty() && lastPassenger - 1 == passengersDeque.peek()) {
            lastPassenger = passengersDeque.pop();
        }
        return lastPassenger - 1;
    }
}
